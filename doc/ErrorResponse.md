# 에러처리

에러처리의 기본은 HTTP Response Code를 사용한 후, Response body에 error detail을 서술한다.

대표적인 API 서비스들이 사용하는 HTTP Response Code

Google GData
200 201 304 400 401 403 404 409 410 500

Netflix
200 201 304 400 401 403 404 412 500

Digg
200 400 401 403 404 410 500 503

###성공
| 코드 | 설명 | 비고 |
| :---: | --- | --- |
| 200 |  성공 | 클라이언트의 요청을 정상적으로 수행하였을때 사용합니다. 응답 바디(body)엔 요청과 관련된 내용을 넣어줍니다. |
| 201 |  성공 |  클라이언트가 어떤 리소스 생성을 요청하였고, 해당 리소스가 성공적으로 생성되었을때 사용합니다. |
| 202 |  성공 |  클라이언트의 요청이 비동기적으로 처리될때 사용합니다. 응답 바디에 처리되기까지의 시간 등의 정보를 넣어주면 좋다고 합니다. |
| 204  |  성공 |  클라이언트의 요청응 정상적으로 수행하였을때 사용합니다. 200과 다른점은 204는 응답 바디가 없을때 사용합니다. 예를들어 DELETE와 같은 요청시에 사용합니다. |

###실패
| 코드 | 설명 | 비고 |
| :---: | --- | --- |
| 400 |  Bad Request |  클라이언트의 요청이 부적절할때 사용합니다. 요청 실패시 가장 많이 사용될 상태코드로 예를들어 클라이언트에서 보낸 것들이 서버에서 유효성 검증(validation)을 통과하지 못하였을때 400으로 응답합니다. 응답 바디에 요청이 실패한 이유를 넣어줘야 합니다. |
| 401 |  Unauthorized |  클라이언트가 인증되지 않은 상태에서 보호된 리소스를 요청했을때 사용하는 요청입니다. 예를들어 로그인(login)하지 않은 사용자가 로그인했을때에만 요청 가능한 리소스를 요청했을때 401을 응답합니다. |
| 403 |  응답하기 싫음 |  사용자 인증상태와 관계 없이 응답하고싶지 않은 리소스를 클라이언트가 요청했을때 사용합니다. 그러나 해당 응답코드 대신 400을 사용할 것을 권고합니다. 그 이유는 일단 403 응답이 왔다는것 자체는 해당 리소스가 존재한다는 뜻입니다. 응답하고싶지 않은 리소스는 존재 여부 조차 감추는게 보안상 좋기때문에 403을 응답해야할 요청에 대해선 그냥 400이나 404를 응답하는게 좋겠습니다. |
| 404 |  Not found ? |  클라이언트가 요청한 리소스가 존재 하지 않을때 사용하는 응답입니다. |
| 405 |  사용중 |  클라이언트가 요청한 리소스에서는 사용 불가능한 Method를 이용했을때 사용하는 응답입니다. 예를들어 읽기전용 리소스에 DELETE Method를 사용했을때 405 응답을 하면 됩니다. |
| 500 |  Internal Server Error |  서버 에러 |

###기타
| 코드 | 설명 | 비고 |
| :---: | --- | --- |
| 301  |  URL 변경 |  클라이언트가 요청한 리소스에 대한 URI가 변경 되었을때 사용합니다. 응답시 Location header에 변경된 URI를 적어줘야 합니다. |
| 500 |  Internal Server Error |  서버에 뭔가 문제가 있을때 사용합니다. |

추가적인 HTTP response code에 대한 사용이 필요하면 http response code 정의 http://en.wikipedia.org/wiki/Http_error_codes 문서를 참고

Twillo의 Error Message 형식의 경우
 - HTTP Status Code : 401
 - {“status”:”401”,”message”:”Authenticate”,”code”:200003,”more info”:”http://www.twillo.com/docs/errors/20003"}
